<div
  class="fixed bottom-5 left-5 w-12 h-12 bg-[var(--btn-regular-bg)] dark:bg-[var(--btn-content)] text-[var(--btn-content)] text-2xl leading-[3rem] text-center rounded-full cursor-pointer shadow-md hover:shadow-lg transition-transform duration-300 ease-in-out z-[100]"
  id="musicButton"
>
  ðŸŽµ
</div>

<audio id="backgroundMusic" loop>
  <source src="/music/ã‚¨ãƒ³ãƒ‰ãƒ­ãƒ¼ãƒ«ãƒ»ã‚·ãƒ³ãƒ‰ãƒ­ãƒ¼ãƒ .mp3" type="audio/mp3" />
</audio>

<style>
  @keyframes spin-slow {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .animate-spin-slow {
    animation: spin-slow 2s linear infinite;
  }
</style>

<script>
  // èŽ·å–DOMå…ƒç´ 
  const musicButton = document.getElementById("musicButton");
  const backgroundMusic = document.getElementById("backgroundMusic");

  // åˆå§‹åŒ–æ’­æ”¾çŠ¶æ€
  let isPlaying = false;

  // è‡ªåŠ¨æ’­æ”¾éŸ³ä¹
  function autoPlayMusic() {
    backgroundMusic
      .play()
      .then(() => {
        isPlaying = true;
        musicButton.classList.add("animate-spin-slow"); // ä½¿ç”¨è‡ªå®šä¹‰çš„æ…¢é€Ÿæ—‹è½¬åŠ¨ç”»
      })
      .catch((error) => {
        console.error("è‡ªåŠ¨æ’­æ”¾å¤±è´¥:", error);
      });
  }

  // ç‚¹å‡»äº‹ä»¶å¤„ç†
  musicButton.addEventListener("click", () => {
    if (isPlaying) {
      // å¦‚æžœæ­£åœ¨æ’­æ”¾ï¼Œåˆ™æš‚åœ
      backgroundMusic.pause();
      musicButton.classList.remove("animate-spin-slow"); // ç§»é™¤æ—‹è½¬åŠ¨ç”»
    } else {
      // å¦‚æžœå·²æš‚åœï¼Œåˆ™ç»§ç»­æ’­æ”¾
      backgroundMusic.play();
      musicButton.classList.add("animate-spin-slow"); // æ·»åŠ æ—‹è½¬åŠ¨ç”»
    }
    isPlaying = !isPlaying; // åˆ‡æ¢æ’­æ”¾çŠ¶æ€
  });

  // é¡µé¢åŠ è½½æ—¶å°è¯•è‡ªåŠ¨æ’­æ”¾éŸ³ä¹
  document.addEventListener("DOMContentLoaded", () => {
    autoPlayMusic();
  });
</script>
